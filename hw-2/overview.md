# Домашнее задание 2

Концептуальная модель данных + Общая модель формальных и функциональных связей - https://miro.com/app/board/uXjVIr692Rk=/?share_link_id=396063810844

Таблица коммуникаций

| Номер связи | Как связь сделана на текущий момент                                                                                                   | Как изменилась связь после 1ого урока | Какая теперь будет связь после 2ого урока                                                                                                                                      | Номера проблем бизнеса, которые потенциально решатся | Почему связь необходимо оставить/изменить                                                                                                                                                                                                                                                                                                                       |
|-------------|---------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [COMM-010]  | HTTP-вызов. Из сервиса найма запрос в сервис менеджмента заданий                                                                      | -                                     | Оставить синхронный запрос информации о менеджере                                                                                                                              | 060                                                  | Судя по описанным требованиям и чату, информация о менеджере в сервисе заданий нужна только для ее отображения на клиенте, при этом самих менеджеров явно небольшое количество, я бы оставил синхронный запрос с кэшем и ttl (10/15/60 минут), который поможет не нагружать излишне сервис менеджмента, так как информация о менеджере обновляется крайне редко |
| [COMM-020]  | HTTP-вызов. Из сервиса найма синхронный запрос в сервис менеджмента. Каждый раз, когда нужно получить информацию об уроке             | -                                     | Event streaming задание из сервиса заданий, консьюмер в сервисе найма                                                                                                          | 050 060                                              | Реплекация данных позволит убрать прямую связь с сервисом менеджмента                                                                                                                                                                                                                                                                                           |
| [COMM-030]  | HTTP-вызов. Из сервиса найма синхронный запрос в сервис менеджмента. Каждый раз, когда задание выполнили правильно 10 раз подряд      | -                                     | Событие о том, что задание решено, сервис менеждмента обработает событие,  и если посчитает что оно слишком легкое - назначит менеджера на переделку                           | 050 060 080                                          | Так как мгновенной редакциии не требуется, достаточно асинхронно принять решение и назначить менеджера. Ему все равно менять задание руками                                                                                                                                                                                                                     |
| [COMM-040]  | HTTP-вызов. Из сервиса найма запрос в сервис бонусов                                                                                  | -                                     | Событие о правильно выполненном задании, сервис бонусов его обработает и начислит бонусы                                                                                       | 030 040 050 060                                      | Расчетный счет раз в месяц, кажется что моментального расчета и начисления не нужно, при этом решит много проблем                                                                                                                                                                                                                                               |
| [COMM-050]  | HTTP-вызов. Из сервиса найма запрос в сервис бонусов                                                                                  | -                                     | Событие о неправильно выполненном задании, сервис бонусов его обработает и спишет бонусы                                                                                       | 050 080                                              | Расчетный счет раз в месяц, кажется что моментального расчета и начисления не нужно, при этом решит много проблем                                                                                                                                                                                                                                               |
| [COMM-060]  | Асинхронная отправка события через kafka. Из сервиса найма  событие в сервис бонусов. Название топика, куда продьюсится событие: task | -                                     | Оставить как есть (хотел изначально на передачу данных в модели решения задания, чтоб брать актуальное значение, но в чате вроде решили что надо актуальный на момент расчета) | 030                                                  | -                                                                                                                                                                                                                                                                                                                                                               |
| [COMM-070]  | HTTP-вызов. Из сервиса бонусов  запрос в сервис менеджмента заданий                                                                   | -                                     | Стриминг данных о менеджере через распределенный лог                                                                                                                           | 090 100                                              | Снимем прямую связь с сервисом менеджмента                                                                                                                                                                                                                                                                                                                      |
| [COMM-080]  | HTTP-вызов. Из сервиса менеджмента заданий запрос в сервис бонусов                                                                    | -                                     | Событие о том что задание создано, в сервисе бонусов обработается и бонусы начислятся                                                                                          | 090 100                                              | Так как расчетный период раз в месяц, то по идее моментальной скорости начисления не нужно                                                                                                                                                                                                                                                                      |
| [COMM-090]  | HTTP-вызов. Из сервиса найма синхронный запрос в сервис менеджмента. Каждый раз, когда надо назначить задачи кандидатам в учителя     | -                                     | Стриминг данных о кандидатах                                                                                                                                                   | 040 060 080                                          | Снимаем нагрузку на сервис найма, реплицируя данные в сервисе менеджмента                                                                                                                                                                                                                                                                                       |


Таблица названий всех топиков и событий


| название очереди/топика     | название событий и номеров связи, которые окажутся в топике | почему вы поместили в топики именно эти события                                             | почему так назвали               |
|-----------------------------|-------------------------------------------------------------|---------------------------------------------------------------------------------------------|----------------------------------|
| data_replication.tasks      | 020                                                         | репликациях данных о заданиях                                                               | по названию реплецируемых данных |
| domain.tasks.task_completed | 030 040 050                                                 | события связанные с заданиями (его выполнении и результатом решения: правильно/неправильно) | по названию бизнес процесса      |
| domain.tasks.rating         | 060                                                         | события связанные с заданиями (его рейтинг)                                                 | по названию бизнес процесса      |
| data_replication.managers   | 070                                                         | репликациях данных о менеджерах                                                             | по названию реплецируемых данных |
| domain.tasks.task_created   | 080                                                         | события связанные с заданиями (его создании)                                                | по названию бизнес процесса      |
| data_replication.candidates | 090                                                         | репликациях данных о кандидатах в учителя                                                   | по названию реплецируемых данных |
